# üîÑ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

## –û—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∫ –µ–¥–∏–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

**–ë—ã–ª–æ:**
- `cmd/server/main.go` - REST API —Å–µ—Ä–≤–µ—Ä
- `cmd/admin_bot/main.go` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –±–æ—Ç
- `cmd/driver_bot/main.go` - –ë–æ—Ç –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
- –¢—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–°—Ç–∞–ª–æ:**
- `cmd/app/main.go` - –ï–¥–∏–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (API + –æ–±–∞ –±–æ—Ç–∞)
- –û–¥–∏–Ω Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- Graceful shutdown –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–µ–ø–ª–æ—è** - –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–º–µ—Å—Ç–æ —Ç—Ä–µ—Ö  
‚úÖ **–ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤** - –æ–±—â–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–µ—Ä–≤–∏—Å—ã  
‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞  
‚úÖ **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
‚úÖ **–ï–¥–∏–Ω—ã–µ –ª–æ–≥–∏** - –≤—Å–µ –ª–æ–≥–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ  

### –ú–∏–≥—Ä–∞—Ü–∏—è

#### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã
```bash
# –ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
docker system prune -f
```

#### 2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
cp env.example .env
# –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤ –≤ .env

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ config.yaml
nano config.yaml
```

#### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
# –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
make start

# –ò–ª–∏ –ø–æ —à–∞–≥–∞–º
make build
make up
```

#### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make check

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

#### API —Å–µ—Ä–≤–µ—Ä
```bash
curl http://localhost:8080/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: OK
```

#### –ë–æ—Ç—ã
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤ –±–æ—Ç –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç—ã –æ—Ç–≤–µ—á–∞—é—Ç

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
docker-compose exec postgres psql -U postgres -d gruzy_ryadom -c "SELECT version();"
```

### –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:

1. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ main.go —Ñ–∞–π–ª—ã** –∏–∑ git –∏—Å—Ç–æ—Ä–∏–∏
2. **–û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml** –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
3. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ** —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ git
git checkout HEAD~1 -- backend/cmd/server/main.go
git checkout HEAD~1 -- backend/cmd/admin_bot/main.go
git checkout HEAD~1 -- backend/cmd/driver_bot/main.go
git checkout HEAD~1 -- docker-compose.yml

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
make clean
make build
make up
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
backend/cmd/app/main.go
‚îú‚îÄ‚îÄ Application struct
‚îÇ   ‚îú‚îÄ‚îÄ server     *http.Server    # REST API
‚îÇ   ‚îú‚îÄ‚îÄ adminBot   *bots.AdminBot  # –ê–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ driverBot  *bots.DriverBot # –ë–æ—Ç –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ service    *service.Service # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ database   *db.DB          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ ctx/cancel                 # Graceful shutdown
‚îú‚îÄ‚îÄ NewApplication()               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Start()                        # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ Stop()                         # –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### –õ–æ–≥–∏ –µ–¥–∏–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –í—Å–µ –ª–æ–≥–∏
make logs

# –¢–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose logs app

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏
docker-compose logs -f app
```

#### Health check
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8080/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres pg_isready -U postgres
```

#### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
make status
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ù–æ–≤–æ–µ –µ–¥–∏–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ:

- **–ú–µ–Ω—å—à–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤** –Ω–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- **–û–±—â–∞—è –ø–∞–º—è—Ç—å** –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ï–¥–∏–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–ú–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤** –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Ç–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤ –æ—Å—Ç–∞—é—Ç—Å—è –≤ `.env` —Ñ–∞–π–ª–µ
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- Graceful shutdown –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö

---

üéâ **–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ–¥–∏–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ—â–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏. 